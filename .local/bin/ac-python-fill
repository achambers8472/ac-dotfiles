#!/usr/bin/env python

from __future__ import print_function
import re
import fileinput

eval_delims = ('{{{', '}}}')
exec_delims = ('{{', '}}')
eval_len = len(eval_delims[0])
exec_len = len(exec_delims[0])

text = ''.join(line for line in fileinput.input())

eval_regex = re.compile('(?s)' + '(.*?)'.join(eval_delims))
exec_regex = re.compile('(?s)' + '(.*?)'.join(exec_delims) + '\n?')

while True:
    exec_match = exec_regex.search(text)
    eval_match = eval_regex.search(text)
    if (exec_match
        and (not eval_match
             or (exec_match.start() < eval_match.start()
                 or (exec_match.start() == eval_match.start()
                     and exec_len > eval_len)))):
        target = exec_match.group(0)
        snippet = exec_match.group(1)
        exec(snippet)
        text = text.replace(target, '', 1)
    elif eval_match:
        target = eval_match.group(0)
        snippet = eval_match.group(1)
        text = text.replace(target, str(eval(snippet)), 1)
    else:
        break
print(text, end='')
