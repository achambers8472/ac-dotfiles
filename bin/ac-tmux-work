#!/usr/bin/env bash

source ac-bash-preamble || exit 1

tmux new-session -s "Work" -n "Local" -d
tmux split-window -v -p 25 "ipython"
tmux select-pane -t 0

tmux new-window -n Updates "sudo apt update ; bash -i"
tmux select-pane -t 0

tmux new-window -n Raijin "while true ; do ssh raijin ; sleep 1 ; done"
tmux split-window -v -p 25 "while true ; do ssh -t raijin \"watch --no-title 'qstat -u ajc566 | tail -n +3' \" ; sleep 1 ; done"
tmux select-pane -t 0

tmux new-window -n "HLRN (Hannover)" "while true ; do ssh hlrn-hannover ; sleep 1 ; done"
tmux split-window -h "while true ; do ssh -t hlrn-hannover 'watch --no-title showq -u hhpchamb' ; sleep 1 ; done"
tmux select-pane -t 0

tmux new-window -n "Phoenix" "while true ; do ssh phoenix ; sleep 1 ; done"
tmux select-pane -t 0

tmux new-window -n "Erwin" "while true ; do ssh erwin ; sleep 1 ; done"
tmux select-pane -t 0

tmux new-window -n "Processes" "htop"
tmux select-pane -t 0

tmux select-window -t "Local"
tmux attach-session -t "Work"
