#!/usr/bin/env python

import string
import random
import argparse
import urllib2

parser = argparse.ArgumentParser(description="Generate a random password.")
parser.add_argument(
    "--symbols",
    action="store",
    default=1,
    type=int,
    help="Number of symbols in password",
)
parser.add_argument(
    "--digits",
    action="store",
    default=2,
    type=int,
    help="Number of digits in password",
)
parser.add_argument(
    "--letters",
    action="store",
    default=9,
    type=int,
    help="Number of digits in password",
)
parser.add_argument(
    "--length",
    action="store",
    type=int,
    default=12,
    help="Password length",
)
parser.add_argument(
    "--no-uppercase",
    dest="uppercase",
    action="store_false",
    help="Use uppercase letters",
)
args = parser.parse_args()

words = urllib2.urlopen(
    "http://svnweb.freebsd.org/csrg/share/dict/words?view=co&content-type=text/plain"
).read().splitlines()

password = ""
while len(password) < args.length:
    next_word = random.choice(words).lower()
    if args.uppercase:
        next_word = next_word.capitalize()
    password = password + next_word
password = password[:args.letters]

for _ in range(args.symbols):
    password = password + random.choice(string.punctuation)

for _ in range(args.digits):
    password = password + random.choice(string.digits)

print password






# length = 16

# bases = [string.letters, string.digits]

# if not args.no_symbols:
#     bases.append(string.punctuation)

# basis = ''.join(bases)

# print ''.join([random.choice(basis) for x in range(length)])
